<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üíñ –î–ª—è —Ç–µ–±—è</title>
<style>
  @font-face {
    font-family: 'Almost Valentine';
    src: url('AlmostValentine-Regular.ttf') format('truetype');
  }

  body {
    margin: 0;
    height: 100vh;
    overflow: hidden;
    font-family: 'Almost Valentine', cursive, sans-serif;
    background: linear-gradient(135deg, #ff758c, #ff7eb3);
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    color: white;
  }

  .card {
    background: rgba(255,255,255,0.15);
    padding: 25px 20px 35px;
    border-radius: 22px;
    backdrop-filter: blur(10px);
    box-shadow: 0 10px 30px rgba(0,0,0,0.3);
    position: relative;
    width: 90%;
    max-width: 350px;
  }

  button {
    margin: 8px;
    padding: 12px 20px;
    border: none;
    border-radius: 20px;
    font-size: 16px;
    cursor: pointer;
    transition: 0.25s;
  }

  #yes {
    background: white;
    color: #ff4d6d;
    position: relative;
    z-index: 1;
  }

  #no {
    background: #ff4d6d;
    color: white;
    position: absolute;
    z-index: 2;
  }

  #musicBtn {
    position: fixed;
    top: 15px;
    right: 15px;
    width: 46px;
    height: 46px;
    border-radius: 50%;
    border: none;
    background: rgba(255,255,255,0.85);
    font-size: 18px;
    cursor: pointer;
  }

  .fade-in { opacity: 0; animation: fadeIn 1s forwards; }

  @keyframes fadeIn { to { opacity: 1; } }

  .heart {
    position: absolute;
    animation: float 5s linear infinite;
    user-select: none;
  }

  @keyframes float {
    0% { transform: translateY(100vh); opacity: 0; }
    30% { opacity: 1; }
    100% { transform: translateY(-10vh); opacity: 0; }
  }

  img {
    max-width: 80%;
    border-radius: 15px;
    margin-top: 15px;
  }

  @media (max-width: 400px) {
    button { font-size: 14px; padding: 10px 16px; }
  }
</style>
</head>
<body>

<audio id="music" loop>
  <source src="love.mp3" type="audio/mpeg">
</audio>
<button id="musicBtn">üîä</button>

<div class="card">
  <button id="startBtn">–ù–∞–∂–º–∏ –ø–µ—Ä–µ–¥ –æ—Ç–≤–µ—Ç–æ–º üîä</button>
  <h2 id="text" style="display:none;"></h2>
  <div id="choices" style="margin-top:20px; display:none;">
    <button id="yes">–î–∞ üíñ</button>
    <button id="no">–ù–µ—Ç üòà</button>
  </div>
</div>

<script>
const message = "–¢—ã –±—É–¥–µ—à—å –º–æ–µ–π –≤–∞–ª–µ–Ω—Ç–∏–Ω–∫–æ–π? üíï"; // <- –ø–æ–º–µ–Ω—è–ª —Ç–µ–∫—Å—Ç –∑–¥–µ—Å—å
let i = 0;

// –ü–µ—á–∞—Ç–∞—é—â–∏–π—Å—è —Ç–µ–∫—Å—Ç
function typing() {
  if(i < message.length) {
    document.getElementById("text").innerHTML += message.charAt(i);
    i++;
    setTimeout(typing, 60);
  }
}

// –ö–Ω–æ–ø–∫–∞ "–ù–µ—Ç" —É–±–µ–≥–∞–µ—Ç (–º—ã—à—å + —Å–µ–Ω—Å–æ—Ä)
let noAttempts = 0;
const maxNoAttempts = 5;
const noBtn = document.getElementById("no");

function moveNoButton() {
  noAttempts++;
  if(noAttempts >= maxNoAttempts){
    noBtn.style.left = "50%";
    noBtn.style.top = "50%";
    noBtn.style.transform = "translate(-50%, -50%)";
  } else {
    const x = Math.random() * (window.innerWidth - noBtn.offsetWidth);
    const y = Math.random() * (window.innerHeight - noBtn.offsetHeight - 60);
    noBtn.style.left = x + "px";
    noBtn.style.top = y + "px";
    noBtn.style.transform = "none";
  }
}
noBtn.addEventListener("mouseover", moveNoButton);
noBtn.addEventListener("touchstart", moveNoButton);

// –ù–∞–∂–∞–ª–∏ "–î–∞"
document.getElementById("yes").addEventListener("click", () => {
  const card = document.querySelector(".card");
  card.innerHTML = `
    <h1>${message}</h1>
    <p>–¢—ã –¥–µ–ª–∞–µ—à—å –º–µ–Ω—è –æ—á–µ–Ω—å —Å—á–∞—Å—Ç–ª–∏–≤—ã–º –≤ –ª—é–±–æ–π –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏ –†–∞–¥–æ—Å—Ç—å –º–æ—è ‚ù§Ô∏è</p>
    <img src="–∞—Ä–≥—É—Å.jpg" alt="üíñ">
  `;
  startHearts();
});

// –ê–Ω–∏–º–∞—Ü–∏—è —Å–µ—Ä–¥–µ—á–µ–∫
const heartsArray = ["üíñ","‚ù§Ô∏è","üíï","üíò","üíù"];
function startHearts(){
  setInterval(() => {
    const heart = document.createElement("div");
    heart.className = "heart";
    heart.innerText = heartsArray[Math.floor(Math.random()*heartsArray.length)];
    heart.style.left = Math.random()*100 + "vw";
    heart.style.fontSize = (14 + Math.random()*26) + "px";
    document.body.appendChild(heart);
    setTimeout(()=>heart.remove(), 5000);
  }, 300);
}

// –ú—É–∑—ã–∫–∞
const music = document.getElementById("music");
const musicBtn = document.getElementById("musicBtn");
let playing = false;
musicBtn.onclick = () => {
  if(!playing){ music.play(); musicBtn.innerText="üîà"; }
  else { music.pause(); musicBtn.innerText="üîä"; }
  playing = !playing;
};

// –°—Ç–∞—Ä—Ç
const startBtn = document.getElementById("startBtn");
const textEl = document.getElementById("text");
const choices = document.getElementById("choices");

startBtn.addEventListener("click", ()=>{
  music.play(); playing=true; musicBtn.innerText="üîà";
  startBtn.style.display="none";
  textEl.style.display="block";
  textEl.classList.add("fade-in");
  typing();
  setTimeout(()=>{
    choices.style.display="flex";
    choices.classList.add("fade-in");
    choices.style.justifyContent="center";
    choices.style.position="relative";
  }, 2000);
});
</script>

</body>
</html>
